<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Payroll - Payroll Management</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
  <script>
    function logout(){ localStorage.removeItem('authToken'); localStorage.removeItem('userRole'); localStorage.removeItem('username'); localStorage.removeItem('fullName'); window.location.href='login.html'; }
    function checkAuth(){ const t=localStorage.getItem('authToken'); const r=localStorage.getItem('userRole'); const u=localStorage.getItem('username'); if(!t||!r||!u){ window.location.href='login.html'; return; } document.getElementById('currentUser').innerHTML=`<span>${localStorage.getItem('fullName') || u}</span><span class="role-badge">${r.toUpperCase()}</span>`; document.body.classList.add('employee-theme'); loadCryptoPayroll(); }
    
    let cryptoChart = null;
    let exchangeRates = {};
    let cryptoWallets = {};
    
    function loadCryptoPayroll() {
        loadExchangeRates();
        loadCryptoWallets();
        loadCryptoSalarySettings();
        loadCryptoTransactions();
        createCryptoDistributionChart();
        loadCryptoAchievements();
    }
    
    function loadExchangeRates() {
        // Simulate real-time exchange rates
        exchangeRates = {
            BTC: { price: 45000, change: 2.5, symbol: '₿' },
            ETH: { price: 3200, change: -1.2, symbol: 'Ξ' },
            USDT: { price: 1.00, change: 0.1, symbol: '₮' },
            USDC: { price: 1.00, change: 0.05, symbol: '◊' },
            BNB: { price: 320, change: 3.1, symbol: '◈' }
        };
        
        updateExchangeRateDisplay();
        
        // Simulate rate updates every 30 seconds
        setInterval(updateExchangeRates, 30000);
    }
    
    function updateExchangeRates() {
        Object.keys(exchangeRates).forEach(crypto => {
            const currentRate = exchangeRates[crypto];
            const change = (Math.random() - 0.5) * 0.1; // ±5% change
            exchangeRates[crypto] = {
                ...currentRate,
                price: currentRate.price * (1 + change),
                change: change * 100
            };
        });
        updateExchangeRateDisplay();
    }
    
    function updateExchangeRateDisplay() {
        const container = document.getElementById('exchangeRatesContainer');
        container.innerHTML = Object.entries(exchangeRates).map(([crypto, data]) => `
            <div class="crypto-rate-card">
                <div class="crypto-info">
                    <div class="crypto-symbol">${data.symbol}</div>
                    <div class="crypto-name">${crypto}</div>
                </div>
                <div class="crypto-price">
                    <div class="price">$${data.price.toFixed(crypto.includes('USD') ? 2 : 0)}</div>
                    <div class="change ${data.change >= 0 ? 'positive' : 'negative'}">
                        ${data.change >= 0 ? '+' : ''}${data.change.toFixed(2)}%
                    </div>
                </div>
            </div>
        `).join('');
    }
    
    function loadCryptoWallets() {
        const wallets = JSON.parse(localStorage.getItem('cryptoWallets') || '[]');
        if (wallets.length === 0) {
            const employees = JSON.parse(localStorage.getItem('employeeDirectory') || '[]');
            const demoWallets = employees.map((emp, index) => ({
                employeeId: emp.employeeId,
                employeeName: emp.name,
                wallets: {
                    BTC: `1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa${index}`,
                    ETH: `0x742d35Cc6634C0532925a3b8D0d9d9b5C5C5C5C${index}`,
                    USDT: `TQn9Y2khEsLJW1ChVWFMSMeRDow5KcbLSE${index}`,
                    USDC: `0x742d35Cc6634C0532925a3b8D0d9d9b5C5C5C5C${index}`,
                    BNB: `bnb1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wl${index}`
                },
                isActive: true,
                lastUpdated: new Date().toISOString()
            }));
            localStorage.setItem('cryptoWallets', JSON.stringify(demoWallets));
            displayCryptoWallets(demoWallets);
        } else {
            displayCryptoWallets(wallets);
        }
    }
    
    function displayCryptoWallets(wallets) {
        const tbody = document.getElementById('cryptoWalletsBody');
        tbody.innerHTML = wallets.map(wallet => `
            <tr>
                <td>${wallet.employeeName}</td>
                <td>${wallet.employeeId}</td>
                <td>
                    <div class="wallet-addresses">
                        ${Object.entries(wallet.wallets).map(([crypto, address]) => `
                            <div class="wallet-item">
                                <span class="crypto-symbol">${exchangeRates[crypto]?.symbol || crypto}</span>
                                <span class="address">${address.substring(0, 10)}...${address.substring(address.length - 6)}</span>
                                <button class="secondary-btn small" onclick="showQRCode('${crypto}', '${address}')">
                                    <i class="fas fa-qrcode"></i>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </td>
                <td>
                    <span class="status-badge ${wallet.isActive ? 'success' : 'danger'}">${wallet.isActive ? 'Active' : 'Inactive'}</span>
                </td>
                <td>
                    <button class="secondary-btn small" onclick="editCryptoWallet('${wallet.employeeId}')">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                </td>
            </tr>
        `).join('');
    }
    
    function loadCryptoSalarySettings() {
        const settings = JSON.parse(localStorage.getItem('cryptoSalarySettings') || '[]');
        if (settings.length === 0) {
            const employees = JSON.parse(localStorage.getItem('employeeDirectory') || '[]');
            const demoSettings = employees.map(emp => ({
                employeeId: emp.employeeId,
                employeeName: emp.name,
                fiatPercentage: 70,
                cryptoPercentage: 30,
                cryptoAllocation: {
                    BTC: 50,
                    ETH: 30,
                    USDT: 20,
                    USDC: 0,
                    BNB: 0
                },
                autoConvert: false,
                lastUpdated: new Date().toISOString()
            }));
            localStorage.setItem('cryptoSalarySettings', JSON.stringify(demoSettings));
            displayCryptoSalarySettings(demoSettings);
        } else {
            displayCryptoSalarySettings(settings);
        }
    }
    
    function displayCryptoSalarySettings(settings) {
        const container = document.getElementById('cryptoSalarySettingsContainer');
        container.innerHTML = settings.map(setting => `
            <div class="salary-setting-card">
                <div class="employee-info">
                    <h4>${setting.employeeName}</h4>
                    <span class="employee-id">${setting.employeeId}</span>
                </div>
                <div class="salary-breakdown">
                    <div class="breakdown-item">
                        <span class="label">Fiat:</span>
                        <span class="value">${setting.fiatPercentage}%</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">Crypto:</span>
                        <span class="value">${setting.cryptoPercentage}%</span>
                    </div>
                </div>
                <div class="crypto-allocation">
                    ${Object.entries(setting.cryptoAllocation).filter(([_, percentage]) => percentage > 0).map(([crypto, percentage]) => `
                        <div class="allocation-item">
                            <span class="crypto-symbol">${exchangeRates[crypto]?.symbol || crypto}</span>
                            <span class="percentage">${percentage}%</span>
                        </div>
                    `).join('')}
                </div>
                <div class="setting-actions">
                    <button class="secondary-btn small" onclick="editCryptoSalarySetting('${setting.employeeId}')">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                </div>
            </div>
        `).join('');
    }
    
    function loadCryptoTransactions() {
        const transactions = JSON.parse(localStorage.getItem('cryptoTransactions') || '[]');
        if (transactions.length === 0) {
            generateDemoTransactions();
        } else {
            displayCryptoTransactions(transactions);
        }
    }
    
    function generateDemoTransactions() {
        const employees = JSON.parse(localStorage.getItem('employeeDirectory') || '[]');
        const transactions = [];
        const today = new Date();
        
        // Generate transactions for the last 3 months
        for (let i = 0; i < 3; i++) {
            const month = new Date(today.getFullYear(), today.getMonth() - i, 15);
            employees.forEach((emp, index) => {
                const cryptos = ['BTC', 'ETH', 'USDT'];
                const crypto = cryptos[index % cryptos.length];
                const amount = Math.random() * 0.5 + 0.1; // 0.1 to 0.6 crypto units
                
                transactions.push({
                    id: `tx_${month.getFullYear()}_${month.getMonth()}_${index}`,
                    employeeId: emp.employeeId,
                    employeeName: emp.name,
                    crypto: crypto,
                    amount: amount,
                    fiatValue: amount * (exchangeRates[crypto]?.price || 1),
                    txHash: `0x${Math.random().toString(16).substr(2, 64)}`,
                    status: Math.random() > 0.1 ? 'Confirmed' : 'Pending',
                    timestamp: month.toISOString(),
                    gasFee: Math.random() * 0.01 + 0.005,
                    blockNumber: Math.floor(Math.random() * 1000000) + 18000000
                });
            });
        }
        
        localStorage.setItem('cryptoTransactions', JSON.stringify(transactions));
        displayCryptoTransactions(transactions);
    }
    
    function displayCryptoTransactions(transactions) {
        const tbody = document.getElementById('cryptoTransactionsBody');
        tbody.innerHTML = transactions.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).map(tx => `
            <tr>
                <td>${tx.employeeName}</td>
                <td>${tx.employeeId}</td>
                <td>
                    <div class="crypto-amount">
                        <span class="crypto-symbol">${exchangeRates[tx.crypto]?.symbol || tx.crypto}</span>
                        <span class="amount">${tx.amount.toFixed(6)}</span>
                    </div>
                    <div class="fiat-value">$${tx.fiatValue.toFixed(2)}</div>
                </td>
                <td>
                    <div class="tx-hash">
                        <span class="hash">${tx.txHash.substring(0, 10)}...${tx.txHash.substring(tx.txHash.length - 6)}</span>
                        <button class="secondary-btn small" onclick="viewTransaction('${tx.txHash}')">
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                    </div>
                </td>
                <td><span class="status-badge ${tx.status === 'Confirmed' ? 'success' : 'warning'}">${tx.status}</span></td>
                <td>${new Date(tx.timestamp).toLocaleDateString()}</td>
                <td>
                    <button class="secondary-btn small" onclick="viewTransactionDetails('${tx.id}')">
                        <i class="fas fa-eye"></i> View
                    </button>
                </td>
            </tr>
        `).join('');
    }
    
    function createCryptoDistributionChart() {
        const ctx = document.getElementById('cryptoDistributionChart');
        if (!ctx) return;
        
        const settings = JSON.parse(localStorage.getItem('cryptoSalarySettings') || '[]');
        const cryptoTotals = { BTC: 0, ETH: 0, USDT: 0, USDC: 0, BNB: 0 };
        
        settings.forEach(setting => {
            Object.entries(setting.cryptoAllocation).forEach(([crypto, percentage]) => {
                cryptoTotals[crypto] += percentage;
            });
        });
        
        const labels = Object.keys(cryptoTotals).filter(crypto => cryptoTotals[crypto] > 0);
        const data = labels.map(crypto => cryptoTotals[crypto]);
        const colors = ['#f7931a', '#627eea', '#26a17b', '#2775ca', '#f3ba2f'];
        
        if (cryptoChart) {
            cryptoChart.destroy();
        }
        
        cryptoChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: labels,
                datasets: [{
                    data: data,
                    backgroundColor: colors.slice(0, labels.length),
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed.toFixed(1) + '%';
                            }
                        }
                    }
                }
            }
        });
    }
    
    function showQRCode(crypto, address) {
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-qrcode"></i> ${crypto} Wallet Address</h3>
                    <span class="close" onclick="this.closest('.modal').remove()">&times;</span>
                </div>
                <div class="qr-container">
                    <div id="qrcode"></div>
                    <div class="address-display">
                        <input type="text" value="${address}" readonly class="address-input">
                        <button onclick="copyToClipboard('${address}')" class="secondary-btn">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // Generate QR code
        const qr = qrcode(0, 'M');
        qr.addData(address);
        qr.make();
        document.getElementById('qrcode').innerHTML = qr.createImgTag(4);
    }
    
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert('Address copied to clipboard!');
        });
    }
    
    function editCryptoWallet(employeeId) {
        alert(`Edit crypto wallet for employee ${employeeId}`);
    }
    
    function editCryptoSalarySetting(employeeId) {
        alert(`Edit crypto salary setting for employee ${employeeId}`);
    }
    
    function viewTransaction(txHash) {
        alert(`View transaction on blockchain explorer: ${txHash}`);
    }
    
    function viewTransactionDetails(txId) {
        const transactions = JSON.parse(localStorage.getItem('cryptoTransactions') || '[]');
        const tx = transactions.find(t => t.id === txId);
        
        if (!tx) return;
        
        const details = `
Transaction Details:
===================

Employee: ${tx.employeeName} (${tx.employeeId})
Crypto: ${tx.crypto} ${exchangeRates[tx.crypto]?.symbol || ''}
Amount: ${tx.amount.toFixed(6)} ${tx.crypto}
Fiat Value: $${tx.fiatValue.toFixed(2)}
Transaction Hash: ${tx.txHash}
Status: ${tx.status}
Timestamp: ${new Date(tx.timestamp).toLocaleString()}
Gas Fee: ${tx.gasFee.toFixed(6)} ETH
Block Number: ${tx.blockNumber}
        `;
        
        alert(details);
    }
    
    function openCryptoSalaryModal() {
        document.getElementById('cryptoSalaryModal').style.display = 'block';
    }
    
    function closeCryptoSalaryModal() {
        document.getElementById('cryptoSalaryModal').style.display = 'none';
    }
    
    function submitCryptoSalary(event) {
        event.preventDefault();
        alert('Crypto salary configuration saved!');
        closeCryptoSalaryModal();
    }
    
    function loadCryptoAchievements() {
        const username = localStorage.getItem('username');
        const achievements = JSON.parse(localStorage.getItem(`achievements_${username}`) || '[]');
        
        const cryptoAchievements = [
            {
                id: 'crypto_early_adopter',
                title: 'Crypto Early Adopter',
                description: 'Set up crypto salary for first employee',
                icon: 'fas fa-coins',
                xpReward: 300,
                condition: () => {
                    const settings = JSON.parse(localStorage.getItem('cryptoSalarySettings') || '[]');
                    return settings.some(s => s.cryptoPercentage > 0);
                }
            },
            {
                id: 'crypto_compliant',
                title: 'Crypto Compliant',
                description: 'Process 10 crypto transactions',
                icon: 'fas fa-shield-alt',
                xpReward: 400,
                condition: () => {
                    const transactions = JSON.parse(localStorage.getItem('cryptoTransactions') || '[]');
                    return transactions.filter(t => t.status === 'Confirmed').length >= 10;
                }
            },
            {
                id: 'crypto_master',
                title: 'Crypto Master',
                description: 'Manage crypto payroll for all employees',
                icon: 'fas fa-crown',
                xpReward: 500,
                condition: () => {
                    const settings = JSON.parse(localStorage.getItem('cryptoSalarySettings') || '[]');
                    return settings.every(s => s.cryptoPercentage > 0);
                }
            }
        ];
        
        cryptoAchievements.forEach(achievement => {
            if (!achievements.includes(achievement.id) && achievement.condition()) {
                awardCryptoAchievement(achievement);
            }
        });
    }
    
    function awardCryptoAchievement(achievement) {
        const username = localStorage.getItem('username');
        const earnedAchievements = JSON.parse(localStorage.getItem(`achievements_${username}`) || '[]');
        earnedAchievements.push(achievement.id);
        localStorage.setItem(`achievements_${username}`, JSON.stringify(earnedAchievements));
        
        showAchievementNotification(achievement);
    }
    
    function showAchievementNotification(achievement) {
        const notification = document.createElement('div');
        notification.className = 'achievement-notification crypto-achievement';
        notification.innerHTML = `
            <div class="notification-content">
                <div class="notification-icon">
                    <i class="${achievement.icon}"></i>
                </div>
                <div class="notification-text">
                    <h4>Achievement Unlocked!</h4>
                    <p>${achievement.title}</p>
                    <span class="xp-reward">+${achievement.xpReward} XP</span>
                </div>
            </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => notification.classList.add('show'), 100);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 5000);
    }
    
    document.addEventListener('DOMContentLoaded', checkAuth);
  </script>
  <style>
    .crypto-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: var(--radius);
      margin-bottom: 30px;
      text-align: center;
    }
    .crypto-header h1 {
      margin: 0 0 10px;
      font-size: 2.5rem;
    }
    .crypto-header p {
      margin: 0;
      opacity: 0.9;
      font-size: 1.1rem;
    }
    .exchange-rates {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }
    .crypto-rate-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--shadow);
    }
    .crypto-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .crypto-symbol {
      font-size: 1.5rem;
      font-weight: bold;
    }
    .crypto-name {
      font-weight: 600;
      color: var(--text);
    }
    .crypto-price .price {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--text);
    }
    .crypto-price .change {
      font-size: 0.9rem;
      font-weight: 600;
    }
    .crypto-price .change.positive {
      color: #10b981;
    }
    .crypto-price .change.negative {
      color: #ef4444;
    }
    .wallet-addresses {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .wallet-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px 8px;
      background: #f8fafc;
      border-radius: 4px;
      font-size: 0.9rem;
    }
    .crypto-amount {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: 600;
    }
    .fiat-value {
      font-size: 0.8rem;
      color: var(--muted);
    }
    .tx-hash {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .hash {
      font-family: monospace;
      font-size: 0.8rem;
      color: var(--muted);
    }
    .salary-setting-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: var(--shadow);
    }
    .employee-info {
      margin-bottom: 15px;
    }
    .employee-info h4 {
      margin: 0 0 5px;
      color: var(--text);
    }
    .employee-id {
      color: var(--muted);
      font-size: 0.9rem;
    }
    .salary-breakdown {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
    }
    .breakdown-item {
      display: flex;
      gap: 5px;
    }
    .breakdown-item .label {
      color: var(--muted);
    }
    .breakdown-item .value {
      font-weight: 600;
      color: var(--primary);
    }
    .crypto-allocation {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .allocation-item {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 4px 8px;
      background: #f0f9ff;
      border-radius: 12px;
      font-size: 0.9rem;
    }
    .qr-container {
      text-align: center;
      padding: 20px;
    }
    .address-display {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .address-input {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9rem;
    }
    .crypto-achievement {
      border-color: #8b5cf6;
      background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
    }
    @media (max-width: 768px) {
      .exchange-rates {
        grid-template-columns: 1fr;
      }
      .crypto-rate-card {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      .salary-breakdown {
        flex-direction: column;
        gap: 10px;
      }
      .address-display {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <h1><i class="fas fa-coins"></i> Crypto Payroll</h1>
      <div class="user-info">
        <span id="currentUser">Loading...</span>
        <button onclick="logout()" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>
  </header>
  
  <div class="container">
    <nav class="sidebar">
      <div class="sidebar-header"><i class="fas fa-user-tie"></i><span>HR Portal</span></div>
      <ul class="nav-links">
        <li><a href="hr-dashboard.html"><i class="fas fa-users"></i><span>HR Dashboard</span></a></li>
        <li><a href="employee-directory.html"><i class="fas fa-users"></i><span>Directory</span></a></li>
        <li><a href="performance-reviews.html"><i class="fas fa-chart-line"></i><span>Performance</span></a></li>
        <li><a href="audit-compliance.html"><i class="fas fa-shield-alt"></i><span>Audit</span></a></li>
        <li><a href="payroll-calendar.html"><i class="fas fa-calendar-alt"></i><span>Payroll Calendar</span></a></li>
        <li><a href="tax-calculator.html"><i class="fas fa-calculator"></i><span>Tax Calculator</span></a></li>
        <li><a href="salary-components.html"><i class="fas fa-coins"></i><span>Salary Components</span></a></li>
        <li><a href="bank-transfers.html"><i class="fas fa-university"></i><span>Bank Transfers</span></a></li>
        <li><a href="payroll-analytics.html"><i class="fas fa-chart-bar"></i><span>Analytics</span></a></li>
        <li><a href="bulk-payroll-import.html"><i class="fas fa-upload"></i><span>Bulk Import</span></a></li>
        <li><a href="payroll-sandbox.html"><i class="fas fa-flask"></i><span>Sandbox</span></a></li>
        <li class="active"><a href="crypto-payroll.html"><i class="fas fa-coins"></i><span>Crypto Payroll</span></a></li>
      </ul>
    </nav>
    
    <main class="main-content">
      <div class="crypto-header">
        <h1><i class="fas fa-rocket"></i> Crypto Payroll Revolution</h1>
        <p>Pay employees in Bitcoin, Ethereum, and stablecoins with real-time conversion</p>
      </div>
      
      <!-- Exchange Rates -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-chart-line"></i> Live Exchange Rates</h3>
        </div>
        <div class="exchange-rates" id="exchangeRatesContainer">
          <!-- Exchange rates will be populated here -->
        </div>
      </div>
      
      <!-- Crypto Distribution Chart -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-chart-pie"></i> Crypto Salary Distribution</h3>
        </div>
        <div class="chart-container">
          <canvas id="cryptoDistributionChart" width="400" height="200"></canvas>
        </div>
      </div>
      
      <!-- Crypto Salary Settings -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-cog"></i> Crypto Salary Settings</h3>
          <button onclick="openCryptoSalaryModal()" class="primary-btn">
            <i class="fas fa-plus"></i> Configure Crypto Salary
          </button>
        </div>
        <div id="cryptoSalarySettingsContainer">
          <!-- Crypto salary settings will be populated here -->
        </div>
      </div>
      
      <!-- Crypto Wallets -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-wallet"></i> Employee Crypto Wallets</h3>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Employee</th>
                <th>ID</th>
                <th>Wallet Addresses</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="cryptoWalletsBody">
              <!-- Crypto wallets will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Crypto Transactions -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-exchange-alt"></i> Crypto Transactions</h3>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Employee</th>
                <th>ID</th>
                <th>Amount</th>
                <th>Transaction Hash</th>
                <th>Status</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="cryptoTransactionsBody">
              <!-- Crypto transactions will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>
  
  <footer><p>&copy; 2025 PayrollPro by Aaron | Crypto Payroll</p></footer>
  
  <!-- Crypto Salary Modal -->
  <div id="cryptoSalaryModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-cog"></i> Configure Crypto Salary</h3>
        <span class="close" onclick="closeCryptoSalaryModal()">&times;</span>
      </div>
      <form onsubmit="submitCryptoSalary(event)">
        <div class="form-grid">
          <div class="form-group">
            <label for="employeeSelect">Employee</label>
            <select id="employeeSelect" required>
              <option value="">Select Employee...</option>
            </select>
          </div>
          <div class="form-group">
            <label for="fiatPercentage">Fiat Percentage</label>
            <input type="number" id="fiatPercentage" min="0" max="100" value="70" required>
          </div>
          <div class="form-group">
            <label for="cryptoPercentage">Crypto Percentage</label>
            <input type="number" id="cryptoPercentage" min="0" max="100" value="30" required>
          </div>
        </div>
        
        <h4>Crypto Allocation</h4>
        <div class="form-grid">
          <div class="form-group">
            <label for="btcAllocation">Bitcoin (%)</label>
            <input type="number" id="btcAllocation" min="0" max="100" value="50">
          </div>
          <div class="form-group">
            <label for="ethAllocation">Ethereum (%)</label>
            <input type="number" id="ethAllocation" min="0" max="100" value="30">
          </div>
          <div class="form-group">
            <label for="usdtAllocation">USDT (%)</label>
            <input type="number" id="usdtAllocation" min="0" max="100" value="20">
          </div>
        </div>
        
        <div class="modal-actions">
          <button type="button" onclick="closeCryptoSalaryModal()" class="secondary-btn">Cancel</button>
          <button type="submit" class="primary-btn">Save Configuration</button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>