<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payroll Sandbox - Payroll Management</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <script>
    function logout(){ localStorage.removeItem('authToken'); localStorage.removeItem('userRole'); localStorage.removeItem('username'); localStorage.removeItem('fullName'); window.location.href='login.html'; }
    function checkAuth(){ const t=localStorage.getItem('authToken'); const r=localStorage.getItem('userRole'); const u=localStorage.getItem('username'); if(!t||!r||!u){ window.location.href='login.html'; return; } if(r!=='hr' && r!=='admin'){ alert('HR/Admin access required'); window.location.href='login.html'; return; } document.getElementById('currentUser').innerHTML=`<span>${localStorage.getItem('fullName') || u}</span><span class="role-badge">${r.toUpperCase()}</span>`; document.body.classList.add('employee-theme'); loadSandbox(); }
    
    let sandboxMode = false;
    let sandboxData = {};
    
    function loadSandbox() {
        loadSandboxStatus();
        loadSandboxScenarios();
        setupSandboxControls();
    }
    
    function loadSandboxStatus() {
        const isActive = localStorage.getItem('sandboxMode') === 'true';
        sandboxMode = isActive;
        
        document.getElementById('sandboxToggle').checked = isActive;
        updateSandboxUI();
    }
    
    function toggleSandboxMode() {
        sandboxMode = !sandboxMode;
        localStorage.setItem('sandboxMode', sandboxMode.toString());
        updateSandboxUI();
        
        if (sandboxMode) {
            showSandboxNotification('Sandbox mode activated - All changes are simulated');
            loadSandboxScenarios();
        } else {
            showSandboxNotification('Sandbox mode deactivated - Back to live mode');
        }
    }
    
    function updateSandboxUI() {
        const sandboxIndicator = document.getElementById('sandboxIndicator');
        const sandboxControls = document.getElementById('sandboxControls');
        
        if (sandboxMode) {
            sandboxIndicator.style.display = 'block';
            sandboxControls.style.display = 'block';
            document.body.classList.add('sandbox-mode');
        } else {
            sandboxIndicator.style.display = 'none';
            sandboxControls.style.display = 'none';
            document.body.classList.remove('sandbox-mode');
        }
    }
    
    function loadSandboxScenarios() {
        const scenarios = [
            {
                id: 'salary_increase',
                title: 'Company-wide 5% Salary Increase',
                description: 'Simulate a 5% salary increase for all employees',
                icon: 'fas fa-arrow-up',
                action: simulateSalaryIncrease
            },
            {
                id: 'tax_bracket_change',
                title: 'New Tax Bracket Implementation',
                description: 'Test new progressive tax brackets',
                icon: 'fas fa-calculator',
                action: simulateTaxBracketChange
            },
            {
                id: 'bonus_distribution',
                title: 'Quarterly Bonus Distribution',
                description: 'Simulate quarterly bonus payments',
                icon: 'fas fa-gift',
                action: simulateBonusDistribution
            },
            {
                id: 'new_employee',
                title: 'Bulk New Employee Onboarding',
                description: 'Test adding 10 new employees',
                icon: 'fas fa-user-plus',
                action: simulateNewEmployeeOnboarding
            },
            {
                id: 'department_restructure',
                title: 'Department Restructuring',
                description: 'Simulate department changes and salary adjustments',
                icon: 'fas fa-sitemap',
                action: simulateDepartmentRestructure
            },
            {
                id: 'benefits_change',
                title: 'Benefits Package Update',
                description: 'Test new benefits calculations',
                icon: 'fas fa-heart',
                action: simulateBenefitsChange
            }
        ];
        
        const container = document.getElementById('scenariosContainer');
        container.innerHTML = scenarios.map(scenario => `
            <div class="scenario-card">
                <div class="scenario-icon">
                    <i class="${scenario.icon}"></i>
                </div>
                <div class="scenario-content">
                    <h4>${scenario.title}</h4>
                    <p>${scenario.description}</p>
                </div>
                <div class="scenario-actions">
                    <button onclick="runScenario('${scenario.id}')" class="primary-btn">
                        <i class="fas fa-play"></i> Run Scenario
                    </button>
                </div>
            </div>
        `).join('');
    }
    
    function runScenario(scenarioId) {
        if (!sandboxMode) {
            alert('Please enable sandbox mode first');
            return;
        }
        
        const scenarios = {
            'salary_increase': simulateSalaryIncrease,
            'tax_bracket_change': simulateTaxBracketChange,
            'bonus_distribution': simulateBonusDistribution,
            'new_employee': simulateNewEmployeeOnboarding,
            'department_restructure': simulateDepartmentRestructure,
            'benefits_change': simulateBenefitsChange
        };
        
        const scenario = scenarios[scenarioId];
        if (scenario) {
            scenario();
        }
    }
    
    function simulateSalaryIncrease() {
        const employees = JSON.parse(localStorage.getItem('employeeDirectory') || '[]');
        const salaryData = JSON.parse(localStorage.getItem('employeeSalaryData') || '[]');
        
        let totalIncrease = 0;
        let affectedEmployees = 0;
        
        salaryData.forEach(salary => {
            const oldCTC = salary.ctc;
            salary.ctc = salary.ctc * 1.05; // 5% increase
            salary.components.forEach(comp => {
                comp.amount = comp.amount * 1.05;
            });
            salary.sandboxChange = {
                type: 'salary_increase',
                oldValue: oldCTC,
                newValue: salary.ctc,
                change: salary.ctc - oldCTC,
                timestamp: new Date().toISOString()
            };
            
            totalIncrease += salary.ctc - oldCTC;
            affectedEmployees++;
        });
        
        // Store sandbox data
        localStorage.setItem('sandboxSalaryData', JSON.stringify(salaryData));
        
        showScenarioResult('Salary Increase Simulation', {
            'Affected Employees': affectedEmployees,
            'Total Increase': `$${totalIncrease.toFixed(2)}`,
            'Average Increase': `$${(totalIncrease / affectedEmployees).toFixed(2)}`,
            'Status': 'Completed'
        });
        
        loadComparisonView();
    }
    
    function simulateTaxBracketChange() {
        const taxBrackets = JSON.parse(localStorage.getItem('taxBrackets') || '[]');
        const sandboxBrackets = JSON.parse(JSON.stringify(taxBrackets));
        
        // Modify US tax brackets (simulate new tax law)
        const usBrackets = sandboxBrackets.find(b => b.region === 'US');
        if (usBrackets) {
            usBrackets.brackets.forEach(bracket => {
                bracket.rate = bracket.rate * 0.95; // 5% reduction in tax rates
            });
            usBrackets.standardDeduction = usBrackets.standardDeduction * 1.1; // 10% increase in standard deduction
        }
        
        localStorage.setItem('sandboxTaxBrackets', JSON.stringify(sandboxBrackets));
        
        showScenarioResult('Tax Bracket Change Simulation', {
            'Tax Rate Reduction': '5% across all brackets',
            'Standard Deduction Increase': '10%',
            'Estimated Tax Savings': '$1,200 per employee annually',
            'Status': 'Completed'
        });
        
        loadComparisonView();
    }
    
    function simulateBonusDistribution() {
        const employees = JSON.parse(localStorage.getItem('employeeDirectory') || '[]');
        const bonusData = [];
        
        employees.forEach(emp => {
            const bonus = Math.random() * 2000 + 1000; // $1000-$3000 bonus
            bonusData.push({
                employeeId: emp.employeeId,
                employeeName: emp.name,
                bonusAmount: bonus,
                type: 'Quarterly Performance Bonus',
                distributedDate: new Date().toISOString(),
                sandbox: true
            });
        });
        
        localStorage.setItem('sandboxBonusData', JSON.stringify(bonusData));
        
        const totalBonus = bonusData.reduce((sum, b) => sum + b.bonusAmount, 0);
        
        showScenarioResult('Bonus Distribution Simulation', {
            'Total Bonus Pool': `$${totalBonus.toFixed(2)}`,
            'Average Bonus': `$${(totalBonus / employees.length).toFixed(2)}`,
            'Recipients': employees.length,
            'Status': 'Completed'
        });
        
        loadComparisonView();
    }
    
    function simulateNewEmployeeOnboarding() {
        const newEmployees = [];
        const departments = ['Operations', 'Marketing', 'Engineering', 'Sales', 'Support'];
        
        for (let i = 1; i <= 10; i++) {
            const employeeId = `EMP${String(1000 + i).padStart(4, '0')}`;
            const department = departments[Math.floor(Math.random() * departments.length)];
            const salary = 40000 + Math.random() * 30000; // $40k-$70k
            
            newEmployees.push({
                employeeId: employeeId,
                name: `New Employee ${i}`,
                department: department,
                role: 'employee',
                username: employeeId.toLowerCase(),
                email: `${employeeId.toLowerCase()}@company.com`,
                salary: salary,
                sandbox: true,
                onboardDate: new Date().toISOString()
            });
        }
        
        localStorage.setItem('sandboxNewEmployees', JSON.stringify(newEmployees));
        
        const totalNewSalary = newEmployees.reduce((sum, emp) => sum + emp.salary, 0);
        
        showScenarioResult('New Employee Onboarding Simulation', {
            'New Employees': newEmployees.length,
            'Total New Salary Cost': `$${totalNewSalary.toFixed(2)}`,
            'Average Salary': `$${(totalNewSalary / newEmployees.length).toFixed(2)}`,
            'Departments': [...new Set(newEmployees.map(emp => emp.department))].join(', '),
            'Status': 'Completed'
        });
        
        loadComparisonView();
    }
    
    function simulateDepartmentRestructure() {
        const employees = JSON.parse(localStorage.getItem('employeeDirectory') || '[]');
        const restructureData = [];
        
        employees.forEach(emp => {
            const departments = ['Operations', 'Marketing', 'Engineering', 'Sales', 'Support', 'Finance'];
            const newDept = departments[Math.floor(Math.random() * departments.length)];
            const salaryAdjustment = (Math.random() - 0.5) * 0.2; // ±10% salary adjustment
            
            restructureData.push({
                employeeId: emp.employeeId,
                employeeName: emp.name,
                oldDepartment: emp.department,
                newDepartment: newDept,
                salaryAdjustment: salaryAdjustment,
                timestamp: new Date().toISOString(),
                sandbox: true
            });
        });
        
        localStorage.setItem('sandboxRestructureData', JSON.stringify(restructureData));
        
        const deptChanges = restructureData.filter(r => r.oldDepartment !== r.newDepartment).length;
        const avgAdjustment = restructureData.reduce((sum, r) => sum + r.salaryAdjustment, 0) / restructureData.length;
        
        showScenarioResult('Department Restructure Simulation', {
            'Total Employees': restructureData.length,
            'Department Changes': deptChanges,
            'Average Salary Adjustment': `${(avgAdjustment * 100).toFixed(1)}%`,
            'Status': 'Completed'
        });
        
        loadComparisonView();
    }
    
    function simulateBenefitsChange() {
        const benefitsData = {
            healthInsurance: { old: 200, new: 250, change: 50 },
            dentalInsurance: { old: 50, new: 60, change: 10 },
            retirement401k: { old: 300, new: 350, change: 50 },
            lifeInsurance: { old: 25, new: 30, change: 5 },
            disabilityInsurance: { old: 40, new: 45, change: 5 }
        };
        
        localStorage.setItem('sandboxBenefitsData', JSON.stringify(benefitsData));
        
        const totalIncrease = Object.values(benefitsData).reduce((sum, benefit) => sum + benefit.change, 0);
        
        showScenarioResult('Benefits Package Update Simulation', {
            'Health Insurance': `$${benefitsData.healthInsurance.old} → $${benefitsData.healthInsurance.new}`,
            'Dental Insurance': `$${benefitsData.dentalInsurance.old} → $${benefitsData.dentalInsurance.new}`,
            '401k Contribution': `$${benefitsData.retirement401k.old} → $${benefitsData.retirement401k.new}`,
            'Total Monthly Increase': `$${totalIncrease} per employee`,
            'Status': 'Completed'
        });
        
        loadComparisonView();
    }
    
    function showScenarioResult(title, results) {
        const resultHTML = `
            <h4>${title}</h4>
            <div class="result-grid">
                ${Object.entries(results).map(([key, value]) => `
                    <div class="result-item">
                        <span class="result-label">${key}:</span>
                        <span class="result-value">${value}</span>
                    </div>
                `).join('')}
            </div>
        `;
        
        alert(resultHTML);
    }
    
    function loadComparisonView() {
        const comparisonContainer = document.getElementById('comparisonContainer');
        
        // Get sandbox data
        const sandboxSalary = JSON.parse(localStorage.getItem('sandboxSalaryData') || '[]');
        const sandboxBonus = JSON.parse(localStorage.getItem('sandboxBonusData') || '[]');
        const sandboxNewEmployees = JSON.parse(localStorage.getItem('sandboxNewEmployees') || '[]');
        const sandboxBenefits = JSON.parse(localStorage.getItem('sandboxBenefitsData') || '{}');
        
        let comparisonHTML = '<h3><i class="fas fa-balance-scale"></i> Sandbox vs Live Data Comparison</h3>';
        
        if (sandboxSalary.length > 0) {
            const liveSalary = JSON.parse(localStorage.getItem('employeeSalaryData') || '[]');
            const totalLive = liveSalary.reduce((sum, s) => sum + s.ctc, 0);
            const totalSandbox = sandboxSalary.reduce((sum, s) => sum + s.ctc, 0);
            const difference = totalSandbox - totalLive;
            
            comparisonHTML += `
                <div class="comparison-section">
                    <h4>Salary Comparison</h4>
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <span class="comparison-label">Live Total:</span>
                            <span class="comparison-value live">$${totalLive.toLocaleString()}</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Sandbox Total:</span>
                            <span class="comparison-value sandbox">$${totalSandbox.toLocaleString()}</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Difference:</span>
                            <span class="comparison-value ${difference > 0 ? 'positive' : 'negative'}">$${Math.abs(difference).toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        if (sandboxBonus.length > 0) {
            const totalBonus = sandboxBonus.reduce((sum, b) => sum + b.bonusAmount, 0);
            comparisonHTML += `
                <div class="comparison-section">
                    <h4>Bonus Distribution</h4>
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <span class="comparison-label">Total Bonus Pool:</span>
                            <span class="comparison-value sandbox">$${totalBonus.toLocaleString()}</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Recipients:</span>
                            <span class="comparison-value sandbox">${sandboxBonus.length}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        if (sandboxNewEmployees.length > 0) {
            const totalNewSalary = sandboxNewEmployees.reduce((sum, emp) => sum + emp.salary, 0);
            comparisonHTML += `
                <div class="comparison-section">
                    <h4>New Employee Impact</h4>
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <span class="comparison-label">New Employees:</span>
                            <span class="comparison-value sandbox">${sandboxNewEmployees.length}</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Additional Salary Cost:</span>
                            <span class="comparison-value sandbox">$${totalNewSalary.toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        if (Object.keys(sandboxBenefits).length > 0) {
            const totalIncrease = Object.values(sandboxBenefits).reduce((sum, benefit) => sum + benefit.change, 0);
            comparisonHTML += `
                <div class="comparison-section">
                    <h4>Benefits Cost Impact</h4>
                    <div class="comparison-grid">
                        <div class="comparison-item">
                            <span class="comparison-label">Monthly Increase per Employee:</span>
                            <span class="comparison-value sandbox">$${totalIncrease}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        comparisonContainer.innerHTML = comparisonHTML;
    }
    
    function clearSandboxData() {
        if (!confirm('Clear all sandbox data? This action cannot be undone.')) return;
        
        localStorage.removeItem('sandboxSalaryData');
        localStorage.removeItem('sandboxTaxBrackets');
        localStorage.removeItem('sandboxBonusData');
        localStorage.removeItem('sandboxNewEmployees');
        localStorage.removeItem('sandboxRestructureData');
        localStorage.removeItem('sandboxBenefitsData');
        
        document.getElementById('comparisonContainer').innerHTML = '<p>No sandbox data available. Run scenarios to see comparisons.</p>';
        
        showSandboxNotification('All sandbox data cleared');
    }
    
    function setupSandboxControls() {
        // Add event listeners for sandbox controls
        document.getElementById('clearSandboxBtn').onclick = clearSandboxData;
    }
    
    function showSandboxNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'sandbox-notification';
        notification.innerHTML = `
            <div class="notification-content">
                <i class="fas fa-flask"></i>
                <span>${message}</span>
            </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => notification.classList.add('show'), 100);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
    
    document.addEventListener('DOMContentLoaded', checkAuth);
  </script>
  <style>
    .sandbox-mode {
      --primary: #8b5cf6;
      --primary-600: #7c3aed;
    }
    .sandbox-indicator {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #8b5cf6;
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
      display: none;
    }
    .sandbox-controls {
      background: #f3f4f6;
      border: 2px solid #8b5cf6;
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 30px;
      display: none;
    }
    .sandbox-toggle {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    .toggle-switch {
      position: relative;
      width: 60px;
      height: 30px;
      background: #ccc;
      border-radius: 15px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .toggle-switch.active {
      background: #8b5cf6;
    }
    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s;
    }
    .toggle-switch.active::after {
      transform: translateX(30px);
    }
    .scenarios-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .scenario-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .scenario-icon {
      width: 50px;
      height: 50px;
      background: #8b5cf6;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
    }
    .scenario-content {
      flex: 1;
    }
    .scenario-content h4 {
      margin: 0 0 5px;
      color: var(--text);
    }
    .scenario-content p {
      margin: 0;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .comparison-container {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
    }
    .comparison-section {
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border);
    }
    .comparison-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }
    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 10px;
    }
    .comparison-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: #f8fafc;
      border-radius: 6px;
    }
    .comparison-label {
      font-weight: 600;
      color: var(--muted);
    }
    .comparison-value {
      font-weight: bold;
    }
    .comparison-value.live {
      color: #3b82f6;
    }
    .comparison-value.sandbox {
      color: #8b5cf6;
    }
    .comparison-value.positive {
      color: #10b981;
    }
    .comparison-value.negative {
      color: #ef4444;
    }
    .sandbox-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #8b5cf6;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
      z-index: 1000;
      transform: translateY(100px);
      transition: transform 0.3s ease;
    }
    .sandbox-notification.show {
      transform: translateY(0);
    }
    .notification-content {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }
    .result-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 12px;
      background: #f1f5f9;
      border-radius: 6px;
    }
    .result-label {
      font-weight: 600;
      color: var(--muted);
    }
    .result-value {
      font-weight: bold;
      color: var(--primary);
    }
    @media (max-width: 768px) {
      .scenarios-grid {
        grid-template-columns: 1fr;
      }
      .scenario-card {
        flex-direction: column;
        text-align: center;
      }
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div id="sandboxIndicator" class="sandbox-indicator">
    <i class="fas fa-flask"></i> Sandbox Mode Active
  </div>
  
  <header class="header">
    <div class="header-content">
      <h1><i class="fas fa-flask"></i> Payroll Sandbox</h1>
      <div class="user-info">
        <span id="currentUser">Loading...</span>
        <button onclick="logout()" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>
  </header>
  
  <div class="container">
    <nav class="sidebar">
      <div class="sidebar-header"><i class="fas fa-user-tie"></i><span>HR Portal</span></div>
      <ul class="nav-links">
        <li><a href="hr-dashboard.html"><i class="fas fa-users"></i><span>HR Dashboard</span></a></li>
        <li><a href="employee-directory.html"><i class="fas fa-users"></i><span>Directory</span></a></li>
        <li><a href="performance-reviews.html"><i class="fas fa-chart-line"></i><span>Performance</span></a></li>
        <li><a href="audit-compliance.html"><i class="fas fa-shield-alt"></i><span>Audit</span></a></li>
        <li><a href="payroll-calendar.html"><i class="fas fa-calendar-alt"></i><span>Payroll Calendar</span></a></li>
        <li><a href="tax-calculator.html"><i class="fas fa-calculator"></i><span>Tax Calculator</span></a></li>
        <li><a href="salary-components.html"><i class="fas fa-coins"></i><span>Salary Components</span></a></li>
        <li><a href="bank-transfers.html"><i class="fas fa-university"></i><span>Bank Transfers</span></a></li>
        <li><a href="payroll-analytics.html"><i class="fas fa-chart-bar"></i><span>Analytics</span></a></li>
        <li><a href="bulk-payroll-import.html"><i class="fas fa-upload"></i><span>Bulk Import</span></a></li>
        <li class="active"><a href="payroll-sandbox.html"><i class="fas fa-flask"></i><span>Sandbox</span></a></li>
      </ul>
    </nav>
    
    <main class="main-content">
      <div class="page-header">
        <h2><i class="fas fa-flask"></i> Payroll Sandbox</h2>
        <p>Safe testing environment for payroll scenarios and simulations.</p>
      </div>
      
      <!-- Sandbox Controls -->
      <div id="sandboxControls" class="sandbox-controls">
        <div class="sandbox-toggle">
          <div class="toggle-switch" id="sandboxToggle" onclick="toggleSandboxMode()"></div>
          <div>
            <h3>Sandbox Mode</h3>
            <p>Enable sandbox mode to run simulations without affecting live data</p>
          </div>
        </div>
        <div class="modal-actions">
          <button id="clearSandboxBtn" class="secondary-btn">
            <i class="fas fa-trash"></i> Clear Sandbox Data
          </button>
        </div>
      </div>
      
      <!-- Scenarios -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-play-circle"></i> Test Scenarios</h3>
          <p>Run simulations to test payroll changes and their impact</p>
        </div>
        <div class="scenarios-grid" id="scenariosContainer">
          <!-- Scenarios will be populated here -->
        </div>
      </div>
      
      <!-- Comparison View -->
      <div class="content-section">
        <div class="section-header">
          <h3><i class="fas fa-balance-scale"></i> Live vs Sandbox Comparison</h3>
        </div>
        <div id="comparisonContainer" class="comparison-container">
          <p>Enable sandbox mode and run scenarios to see comparisons with live data.</p>
        </div>
      </div>
    </main>
  </div>
  
  <footer><p>&copy; 2025 PayrollPro by Aaron | Payroll Sandbox</p></footer>
</body>
</html>